<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/cadastro.css">
  <link rel="shortcut icon" href="img/Sport Mark.jpg" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <title>Login</title>
</head>

<body>
  <header></header>

  <main>
    <div class="container">
      <div class="row">
        <div class="col-md-6 offset-md-4">
          <div class="register-form">
            <h2>Cadastro de Usuário</h2>
            <form>
              <div class="form-group">
                <label for="name">Nome:</label>
                <input type="text" id="name" name="name" required>
              </div>
              <div class="form-group">
                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" required>
              </div>
              <div class="form-group pb-3">
                <label for="password">Senha:</label>
                <input type="password" id="password" name="password" required>
              </div>
              <div class="form-group">
                <button type="submit">Cadastrar</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer></footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <script>
    $(document).ready(() => {
      // Carregar o cabeçalho
      $.get('header.html', (data) => {
        $('header').html(data);
        $('.pagina').html(`<div class = "border-bottom border-secondary">
                                        <h5><a class = "text-decoration-none text-dark" href="index.html">Home </a> 
                                            <a class = "text-decoration-none text-dark" href="login.html">/ Login </a>/ Cadastrar</h5>
                                    </div>`);
      });

      // Carregar o rodapé
      $('footer').load('footer.html');

      $('form').submit((event) => {
      event.preventDefault();

      let objDados = JSON.parse(localStorage.getItem('db'));

      const name = $('#name').val();
      const email = $('#email').val();
      const password = $('#password').val();

      let novoId = 1;
      if (objDados.contas.length != 0)
          novoId = objDados.contas[objDados.contas.length - 1].id + 1;

      let novaConta = {
          id: novoId,
          nome: name,
          senha: password
      };

      objDados.contas.push (novaConta);
      localStorage.setItem ('db', JSON.stringify (objDados));

      window.location.href = 'login.html';
    });
    });

  </script>
</body>

</html>